name: PR to Development branch

on:
    workflow_run: 
        workflows: ["Docker Build Check"]
        types:
            - completed

permissions:
  contents: read
  pull-requests: write

jobs:
  pr-to-dev:
    runs-on: ubuntu-latest

    steps:

      - name: Checkout Code
        uses: actions/checkout@v4
        
      - name: Set up Git
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v7
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: "Automated changes by GitHub Actions"
          branch: "${{ github.ref_name }}"
          title: "Automated PR from ${{ github.ref_name }}"
          body: |
            This is an automated pull request generated by GitHub Actions.

            - **Source branch:** `${{ github.ref_name }}`
            - **Target branch:** `development`

          base: development
          labels: automated, github-actions
          draft: false
